{
  "comments": [
    {
      "key": {
        "uuid": "fe9fe097_39e79f01",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/GlobalHealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-01-16T07:59:39Z",
      "side": 1,
      "message": "Why not parallelising it and sorting it afterwards, if ordering is important?",
      "range": {
        "startLine": 35,
        "startChar": 56,
        "endLine": 35,
        "endChar": 61
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b233177c_a7cc33a0",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/GlobalHealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-01-16T10:26:35Z",
      "side": 1,
      "message": "In this version of the code, we need to maintain the same thread. The parallelization is done in a follow-up change because involve many more changes.\n\nGerrit behaves differently if things are executed in a separate thread, a lot of stuff is in the thread-local.",
      "parentUuid": "fe9fe097_39e79f01",
      "range": {
        "startLine": 35,
        "startChar": 56,
        "endLine": 35,
        "endChar": 61
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "86355cea_deb684fa",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/GlobalHealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-01-16T10:44:16Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "b233177c_a7cc33a0",
      "range": {
        "startLine": 35,
        "startChar": 56,
        "endLine": 35,
        "endChar": 61
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2f80f421_c081f487",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/HealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-01-16T07:59:39Z",
      "side": 1,
      "message": "What if the test is still running while hitting this API? Wouldn\u0027t it be better to have an Enum of String instead to describe the statues of the check (i.e.: failed, passed, running, skipped)",
      "range": {
        "startLine": 20,
        "startChar": 25,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "130b6a50_96e806c8",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/HealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-01-16T08:13:06Z",
      "side": 1,
      "message": "I can\u0027t come up with an example for the \"running\" state in our case, but I was thinking to a test which takes time to run. The \"skipped\" instead one might be the case where, for example, ReviewDB is disabled, or any other downstream component we are testing can be switched off.",
      "parentUuid": "2f80f421_c081f487",
      "range": {
        "startLine": 20,
        "startChar": 25,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f00af3d5_08e02261",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/HealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-01-16T10:26:35Z",
      "side": 1,
      "message": "We could introduce more \"states\" instead of just a boolean. It isn\u0027t clear to me anyway, how a workload balancer (for instance) would need to manage \"running\" or \"skipped\" state?\n\nIt isn\u0027t clear to me either how can the test still be running if we have created a Result value object. Bear in mind that healthy field is a final and can\u0027t be changed.",
      "parentUuid": "130b6a50_96e806c8",
      "range": {
        "startLine": 20,
        "startChar": 25,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5e3b7f1c_d737dc3e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/HealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2019-01-16T10:44:16Z",
      "side": 1,
      "message": "The load balancer wouldn\u0027t probably care about all the values of the \"healthy\" field. Still, I think it can be useful for debugging purposes. We can add it later on, if we think it can be useful.",
      "parentUuid": "f00af3d5_08e02261",
      "range": {
        "startLine": 20,
        "startChar": 25,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05d0ad06_60cfe442",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/healthcheck/check/HealthCheck.java",
        "patchSetId": 13
      },
      "lineNbr": 20,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-01-16T11:22:56Z",
      "side": 1,
      "message": "Point taken: HAProxy cares about the HTTP status only.\n\nIt would be useful to get it right the first time :-)\nWhat about:\n\n- failed\n- passed\n- skipped (when you would do that?)\n- running (because the value class is final, when would you return \u0027running\u0027 ?)",
      "parentUuid": "5e3b7f1c_d737dc3e",
      "range": {
        "startLine": 20,
        "startChar": 25,
        "endLine": 20,
        "endChar": 32
      },
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "65417a5b_e6edb8c0",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/healthcheck/HealthCheckStatusEndpointTest.java",
        "patchSetId": 13
      },
      "lineNbr": 71,
      "author": {
        "id": 1072905
      },
      "writtenOn": "2019-01-16T09:34:21Z",
      "side": 1,
      "message": "it would be interesting to test the case where no bindings are provided, still returns 200 OK",
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "127ca5e5_f6d484d6",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/healthcheck/HealthCheckStatusEndpointTest.java",
        "patchSetId": 13
      },
      "lineNbr": 71,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2019-01-16T10:26:35Z",
      "side": 1,
      "message": "Yes, we could. However, is that a real scenario? The binding is done in the code and there is always at least one health checker.",
      "parentUuid": "65417a5b_e6edb8c0",
      "revId": "5e29347a89b368abd3dc415b47bbcca33ab14476",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}